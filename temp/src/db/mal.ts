import { MongoClient } from 'mongodb'
// import fs from 'fs/promises'
import appProps from  'appProps.json' assert { type: "json" };


// TODO needs dependency injection
export class MALDB {
	client: MongoClient

	constructor() {
		this.client = new MongoClient(appProps.dbUrl)
		
	}

	// TODO test
	async writeAnimeList(test: any) {
		await this.client.connect()
		console.log('Connected successfully to server');

		const db = this.client.db(appProps.dbName);
		const collection = db.collection(appProps.mal.malCollections.animeList);
	
		const insertResult = await collection.insertMany(test);
		console.log('Inserted documents =>', insertResult);
	}

}
