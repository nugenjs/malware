import { Inject } from "@nestjs/common";
import { ConfigType, registerAs } from "@nestjs/config";

export const mongoConfiguration = registerAs('mongo', () => ({
    uri: process.env.MONGO_URI || 'mongodb://localhost:27017',
    // uri: process.env.MONGO_URI || 'mongodb://localhost:27017/malware',
    dbName: process.env.MONGO_DB_NAME || 'malware',
    // db: process.env.MONGO_DB || 'malware',
    // host: process.env.MONGO_HOST || 'localhost',
    // port: process.env.MONGO_PORT || 27017,
    // database: process.env.MONGO_DATABASE || 'malware',
    // auth: {
    //     username: process.env.MONGO_USERNAME || 'malware',
    //     password: process.env.MONGO_PASSWORD || 'malware',
    // },
    // get uri(): string {
    //     return `mongodb://${this.auth.username}:${this.auth.password}@${this.host}:${this.port}/${this.database}`;
    // },
}));

export type MongoConfiguration = ConfigType<typeof mongoConfiguration>;

export const InjectMongoConfig = () => Inject(mongoConfiguration.KEY);
